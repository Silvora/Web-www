(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(6044)}])},1072:function(e,s,n){"use strict";var t=n(8945),a=n(1391);let i=t.Z.create({baseURL:"http://127.0.0.1:7412/api/",timeout:5e3});i.interceptors.request.use(e=>{let s=(0,a.LP)("ZJS-7579-Admin-Token");return s&&(e.headers={"ZJS-7579-Admin-Token":s}),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e.data,e=>Promise.reject(e)),s.Z=i},6044:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return p}});var t=n(5893),a=n(7294),i=n(9008),o=n.n(i),l=n(1072);function c(e){return l.Z.request({url:"/login",method:"POST",data:e})}var r=n(1163),d=n.n(r),u=n(1391);function p(){let[e,s]=(0,a.useState)(""),[n,i]=(0,a.useState)(!1),[r,p]=(0,a.useState)(""),[m,h]=(0,a.useState)(!1),[x,f]=(0,a.useState)(""),[j,g]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[v,k]=(0,a.useState)(!1),[S,_]=(0,a.useState)(""),b=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,y=e=>{s(e.target.value)},T=()=>{i(!0),l.Z.request({url:"/login?email=".concat(e),method:"GET"}).then(e=>{console.log(e),w(e.isLogin)}).catch(e=>{console.log(e)})},Z=e=>{p(e.target.value)},A=()=>{c({email:e,password:r}).then(e=>{console.log(e),h(!0),"false"==e.isEmail&&(_("邮箱验证码发送失败！！！"),k(!0)),e.isLogin&&(g(!0),(0,u.o4)("Admin-Email",e.email),(0,u.o4)("ZJS-7579-Admin-Token",e.Token),d().push("/"))}).catch(e=>{console.log(e)})},C=e=>{f(e.target.value)},E=()=>{c({email:e,password:r,verify:x}).then(e=>{console.log(e),e.isLogin&&(g(!0),(0,u.o4)("Admin-Email",e.email),(0,u.o4)("ZJS-7579-Admin-Token",e.Token),d().push("/"))}).catch(e=>{console.log(e)})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o(),{children:[(0,t.jsx)("title",{children:"Login"}),(0,t.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("main",{children:[(0,t.jsx)("div",{className:"back",children:v?(0,t.jsxs)("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:[S,(0,t.jsx)("span",{"aria-hidden":"true",style:{cursor:"pointer",float:"right"},onClick:()=>k(!1),children:"\xd7"})]}):""}),(0,t.jsxs)("div",{className:"registration-form",children:[(0,t.jsxs)("header",{children:[(0,t.jsxs)("h1",{children:["Login",(0,t.jsx)("span",{style:{float:"right",cursor:"pointer"},children:(0,t.jsx)("i",{className:"fa fa-qrcode",children:(0,t.jsx)("div",{className:"help-tip",children:(0,t.jsx)("p",{children:"二维码"})})})})]}),(0,t.jsx)("p",{children:"登录 / 注册 "})]}),(0,t.jsxs)("form",{children:[(0,t.jsxs)("div",{className:n?"input-section email-section fold-up":"input-section email-section ",children:[(0,t.jsx)("input",{className:"email",type:"email",placeholder:"邮箱",value:e,onChange:y}),(0,t.jsxs)("div",{className:"animated-button",children:[(0,t.jsx)("span",{className:b.test(e)?"icon-paper-plane next":"icon-paper-plane",children:(0,t.jsx)("i",{className:"fa fa-envelope-o"})}),(0,t.jsx)("span",{className:"next-button email",style:{cursor:b.test(e)?"pointer":"none"},onClick:T,children:(0,t.jsx)("i",{className:"fa fa-arrow-up"})})]})]}),(0,t.jsxs)("div",{className:n?"input-section password-section":"input-section password-section folded",children:[(0,t.jsx)("input",{className:"password",type:"password",placeholder:"密码",value:r,onChange:Z}),(0,t.jsxs)("div",{className:"animated-button",children:[(0,t.jsx)("span",{className:r.length>=6?"icon-lock next":"icon-lock",children:(0,t.jsx)("i",{className:"fa fa-lock"})}),(0,t.jsx)("span",{className:"next-button password",style:{cursor:r.length>=6?"pointer":"none"},onClick:A,children:(0,t.jsx)("i",{className:"fa fa-arrow-up"})})]})]}),N?"":(0,t.jsxs)("div",{className:m?"input-section repeat-password-section":"input-section repeat-password-section folded",children:[(0,t.jsx)("input",{className:"repeat-password",type:"text",placeholder:"验证码",value:x,onChange:C}),(0,t.jsxs)("div",{className:"animated-button",children:[(0,t.jsx)("span",{className:8==x.length?"icon-repeat-lock next":"icon-repeat-lock",children:(0,t.jsx)("i",{className:"fa fa-comment"})}),(0,t.jsx)("span",{className:"next-button repeat-password",style:{cursor:8==x.length?"pointer":"none"},onClick:E,children:(0,t.jsx)("i",{className:"fa fa-paper-plane"})})]})]}),(0,t.jsx)("div",{className:"success",style:{marginTop:j?"0":"none"},children:(0,t.jsx)("p",{children:"登录中，请稍后。。。"})})]})]})]})]})}},1391:function(e,s,n){"use strict";function t(e){return window.localStorage.getItem(e)}function a(e,s){window.localStorage.setItem(e,s)}function i(e){window.localStorage.removeItem(e)}n.d(s,{LP:function(){return t},o4:function(){return a},qz:function(){return i}})},9008:function(e,s,n){e.exports=n(3121)},1163:function(e,s,n){e.exports=n(880)}},function(e){e.O(0,[945,774,888,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);